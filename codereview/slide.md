# コードレビューで指摘したいこと大事なこと

Tomohiro Hashidate
@joker1007



## 自己紹介
- @joker1007
- (株)ウサギィ -> フリーランス
- Ruby/Railsを中心にした何でも屋みたいな
- パーフェクトRuby, パーフェクトRuby on Rails著者
- vimmer

![pruby.jpg](pruby.jpg)
![prails.jpg](prails.jpg)



## 自分にとってのコードレビュー
「今」より「次」を良いものにするための活動



## コードレビューで指摘したいこと

概ね下に行く程、コンテキストへの理解が必要

- コーディング規約に則ってない (できれば自動化)
- もっと読み易い(短い)書き方がある
- もっと効率の良い書き方がある
- マジックナンバー
- 意図が不明
- 名前付けが不自然
- 単純な分岐が増える
- 同じ様なコードが増える
- 変更に弱そう
- 場当たり的な対処で済まそうとしている
- 要件と微妙な齟齬がある処理



## コードレビューで賞賛したいこと
- コードが減る
- 分岐が減る
- テストケースが増える
- 読み易くなる
- 分かりやすい名前が付く



## 指摘すべきでないこと
- コーディング規約に関わらない好み
- 説明不可能な違和感



## コードレビューで大事なこと
- 何故そこが良くないのかの理由を明確に説明できること
- 代案を示せること
- 間違ってたら素直に謝ること
- 口調は丁寧に
- 「常識ですよ」とかいう言い方をしない
- 立場は関係無い、皆同じ
- 指摘されることは恥ずかしくない



## レビュワーが得られるもの
- 人に説明することによる考えの整理
- コードリーディングが早くなる
- 読み易いコードを意識できるようになる



## レビュワーが失うもの
## 時間とMP



## ぶっちゃけ疲れる



## 属人化しないように
- ブラックボックスな処理を生まない体制
- 気兼ねなく指摘できる空気
- ある程度信頼できるテストコード



## コードレビュー義務 + 属人化 = 死
開発が劇的に遅くなる



## ベテランやエースに頼り過ぎない
## 自分達でコードを良くしていこう
